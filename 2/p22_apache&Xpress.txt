이 문서는 아파치 기반 Xpress 설정에 관한 내용을 다룹니다.
p19 mariadb , p20 php install , p21 phpmyadmin 과정을 선행적으로 수행하고 오셔야합니다.

systemctl restart named
systemctl restart httpd
systemctl restart mariadb

systemctl status named | journalctl -xe

시작한다.


깃허브에서
xpress engine 파일을 받고

ftp 로 리눅스로 넘긴다음

unzip 옵션없이 푼다음

cp -r xpressengine-master/ xe
복사해줬다.

실행 안된다.
하지만


Not Found (The requested URL /main was not found on this server.) 에러가 아니라 

    Internal Server Error

    The server encountered an internal error or misconfiguration and was unable to complete your request.

    Please contact the server administrator at root@localhost to inform them of the time this error occurred, and the actions you performed just before this error.

    More information about this error may be available in the server error log.
라는 구문이 떴다.


(* https://toma0912.tistory.com/55 참고)

    [root@server public_html]# httpd -v
    Server version: Apache/2.4.6 (CentOS)
    Server built:   Nov 10 2021 14:26:31
    [root@server public_html]#


    [root@server public_html]#

    [root@server public_html]# systemctl status httpd
    ● httpd.service - The Apache HTTP Server
    Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)
    Active: active (running) since 목 2022-01-06 11:44:48 KST; 6min ago
        Docs: man:httpd(8)
            man:apachectl(8)
    Main PID: 2103 (httpd)

    [root@server public_html]# firewall-cmd --zone=public --add-port=80/tcp --permanent
    success
    [root@server public_html]# firewall-cmd --reload
    success
    [root@server public_html]#

    [root@server public_html]# yum -y install net-tools

        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

    [root@server public_html]# ifconfig
    ens32: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
            inet 192.168.127.128  netmask 255.255.255.0  broadcast 192.168.127.255
            inet6 fe80::df11:618:4de4:6f37  prefixlen 64  scopeid 0x20<link>
            ether 00:0c:29:dd:c6:e4  txqueuelen 1000  (Ethernet)
            RX packets 31380  bytes 42530391 (40.5 MiB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 4033  bytes 674336 (658.5 KiB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

    lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
            inet 127.0.0.1  netmask 255.0.0.0
            inet6 ::1  prefixlen 128  scopeid 0x10<host>
            loop  txqueuelen 1000  (Local Loopback)
            RX packets 301  bytes 410657 (401.0 KiB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 301  bytes 410657 (401.0 KiB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

    virbr0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
            inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255
            ether 52:54:00:7a:e6:c3  txqueuelen 1000  (Ethernet)
            RX packets 0  bytes 0 (0.0 B)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 0  bytes 0 (0.0 B)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

    [root@server public_html]#

달라진점 없음.



(*https://xe1.xpressengine.com/qna/23190674 참고)


    [root@server public_html]# pwd
    /home/main/public_html
    [root@server public_html]# cat errortest.php
    <?php

    error_reporting(E_All);

    ini_set("display_errors",1);

    ?>
    [root@server public_html]#

파일 만들어주고, 내용 넣어줌.

systemctl restart httpd
systemctl restart named

데몬 재실행 해주고

[root@server public_html]# cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 192.168.127.128
nameserver 192.168.127.2
[root@server public_html]#

리저브 파일 안바꼈는지 확인해주고 (변경점 없음)

www.lingus.com/errortest.php 접속 시도
접속 가능

아무것도 안뜸

http://www.lingus.com/xe/ 접속 시도
에러 발생

다시 www.lingus.com/errortest.php 접속 시도
접속 성공

아무것도 안뜸

(*https://www.delftstack.com/ko/howto/php/php-error-log-location/ 참고)


php --info
입력해봤으나 출력문이 너무 길어 한 페이지를 다 덮었으므로

    [root@server ghd]# pwd
    /home/ghd
    [root@server ghd]# php --info >> prints_php_info.txt
    PHP Warning:  Unknown: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in Unknown on line 0

php --info >> prints_php_info.txt
명령어를 이용하여 문서 안에 담고, 내용을 검색함

vi prints_php_info.txt

:/log

error_log => no value => no value
log_errors => On => On
찾기 시작했지만 거의 이런식으로 나옴

:/log apache 검색어와 관련된 줄은 단 하나도 없었다.


    [root@server public_html]# php --info | grep error
    PHP Warning:  Unknown: It is not safe to rely on the system's timezone settings                                                                                                                                                              . You are *required* to use the date.timezone setting or the date_default_timez                                                                                                                                                              one_set() function. In case you used any of those methods and you are still get                                                                                                                                                              ting this warning, you most likely misspelled the timezone identifier. We selec                                                                                                                                                              ted the timezone 'UTC' for now, but please set date.timezone to select your tim                                                                                                                                                              ezone. in Unknown on line 0
    display_errors => Off => Off
    display_startup_errors => Off => Off
    error_append_string => no value => no value
    error_log => no value => no value
    error_prepend_string => no value => no value
    error_reporting => 22527 => 22527
    html_errors => Off => Off
    ignore_repeated_errors => Off => Off
    log_errors => On => On
    log_errors_max_len => 1024 => 1024
    track_errors => Off => Off
    xmlrpc_error_number => 0 => 0
    xmlrpc_errors => Off => Off
    intl.error_level => 0 => 0
    [root@server public_html]#

다른 명령어도 마찬가지로, 절대 또는 상대 경로에 대한 정보가 출력되지 않았다.

    [root@server ghd]# cat /var/log/apache2/error.log
    cat: /var/log/apache2/error.log: 그런 파일이나 디렉터리가 없습니다
    [root@server ghd]# 

파일을 만들어주고, php 함수를 넣은다음에 httpd 로 접속하여 로그를 남길 예정

    [root@server ghd]# pwd
    /home/ghd
    [root@server ghd]# cat prints_func_phpinfo.txt
    <?php
    phpinfo();
    ?>
    [root@server ghd]#

http://www.lingus.com/prints_func_phpinfo.txt 접속 시도
Not found 에러, 접속불가

http://www.lingus.com/ghd/prints_func_phpinfo.txt 접속 시도
Not found 에러, 접속불가

접속 방법 및 확인 절차가 이상했던것으로 추측함


[root@server httpd]# pwd
/var/log/httpd
[root@server httpd]# ll
합계 116
-rw-r--r-- 1 root root 91469  1월  6 12:05 access_log
-rw-r--r-- 1 root root 23552  1월  6 12:05 error_log
[root@server httpd]#


재부팅


systemctl restart named
systemctl restart httpd
systemctl restart mariadb
데몬 재실행

[root@server httpd]# cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 192.168.127.128
nameserver 192.168.127.2
[root@server httpd]#

리저브 수정



[root@server httpd]# pwd
/var/log/httpd
[root@server httpd]# tail -1 error_log
[Thu Jan 06 19:37:12.619108 2022] [core:alert] [pid 3212] [client 192.168.127.128:49484] /home/main/public_html/xe/.htaccess: Options not allowed here
[root@server httpd]#

로그 출력

(* https://www.binarytides.com/fix-htaccess-options-not-allowed-here-error/
https://lhb.kr/mobile/article.html?no=2674




/etc/httpd/conf/httpd.conf
파일 수정 내용은 아래 문단과 같다.

<Directory "/home/main">
    AllowOverride All
    # Allow open access:
    Require all granted
    Option All
</Directory>


[root@server conf]# systemctl restart httpd
Job for httpd.service failed because the control process exited with error code. See "systemctl status httpd.service" and "journalctl -xe" for details.



/etc/httpd/conf/httpd.conf
파일 수정 내용은 아래 문단과 같다.

<Directory "/home/main">
    AllowOverride All
    # Allow open access:
    Require all granted
    Options All
</Directory>

수정하고, 데몬 재실행한다.

[root@server conf]# systemctl restart httpd
[root@server conf]# systemctl restart named
[root@server conf]#








